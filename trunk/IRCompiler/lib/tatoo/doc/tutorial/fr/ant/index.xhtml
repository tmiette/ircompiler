<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
 "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../../../../tatoo.css" rel="stylesheet"/>
  <title>Les Tâches ant</title>
 </head>
 <body>
  <h1>Les tâches <tt>ant</tt></h1>
  <p>Pour construire les différents classes de l'analyseur, il est possible d'utiliser des tâches <tt>ant</tt>
  plutôt que des commandes en ligne. Il y a une tâche pour chacune des étapes de construction de l'analyseur&nbsp;:</p>
  <ul>
   <li><tt><a href="../lexer/compile.xhtml#ant">fr.umlv.tatoo.cc.lexer.main.LexerTask</a></tt> pour la construction de l'analyseur lexical&nbsp;;</li>
   <li><tt><a href="../parser/compile.xhtml#ant">fr.umlv.tatoo.cc.parser.main.ParserTask</a></tt> pour la construction de l'analyseur syntaxique&nbsp;;</li>
   <li><tt><a href="../tools/compile.xhtml#ant">fr.umlv.tatoo.cc.tools.main.ToolsTask</a></tt> pour la construction des classes de liens entre les analyseur
   et le code utilisateur.</li>
  </ul>
  <h2>Un exemple complet</h2>
  <p>Le fichier <tt>build.xml</tt> suivant donne un exemple complet d'utilisation de ces tâches.</p>
<pre><![CDATA[<?xml version="1.0"?>
<project name="calc" default="all" basedir=".">

 <property name="tatoo.dir" location="../.."/>
 <property name="tatoo.jar" location="${tatoo.dir}/tatoo.jar"/>
 <property name="tatoo-runtime.jar" location="${tatoo.dir}/tatoo-runtime.jar"/>
	
 <property name="src" value="src"/>
 <property name="gen-src" value="gen-src"/>

 <property name="lexer.file" value="calc.xlex"/>
 <property name="parser.file" value="calc.xpars"/>
 <property name="tools.file" value="calc.xtls"/> 

 <property name="lexer.package" value="fr.umlv.tatoo.samples.calc.lexer"/>
 <property name="parser.package" value="fr.umlv.tatoo.samples.calc.parser"/>
 <property name="tools.package" value="fr.umlv.tatoo.samples.calc.tools"/>
 
 <property name="validating" value="true"/>
 
 <taskdef name="lexer" classname="fr.umlv.tatoo.cc.lexer.main.LexerTask" classpath="${tatoo.jar}"/>
 <taskdef name="parser" classname="fr.umlv.tatoo.cc.parser.main.ParserTask" classpath="${tatoo.jar}"/>
 <taskdef name="tools" classname="fr.umlv.tatoo.cc.tools.main.ToolsTask" classpath="${tatoo.jar}"/>
  
 <target name="lexer">
  <lexer destination="${gen-src}" lexerFile="${lexer.file}" validating="${validating}">
   <package lexer="${lexer.package}"/>
  </lexer>
 </target>

 <target name="parser">
  <parser destination="${gen-src}" parserFile="${parser.file}" parsertype="lalr" validating="${validating}">
   <package parser="${parser.package}"/>
  </parser>
 </target>
	
 <target name="tools">
  <tools destination="${gen-src}" lexerFile="${lexer.file}" 
         parserFile="${parser.file}" toolsFile="${tools.file}" validating="${validating}">
   <filealias type="GrammarEvaluator" name="GrammarEvaluator" generate="true"/>
   <package lexer="${lexer.package}"/>
   <package parser="${parser.package}"/>
   <package tools="${tools.package}"/>
  </tools>
 </target>

 <target name="all" depends="lexer,parser,tools,tools-tree"/>

</project>]]></pre>
  <p><a href = "javascript:history.back()">Back</a></p>
 </body>
</html>

